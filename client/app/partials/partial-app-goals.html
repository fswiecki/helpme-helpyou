<!-- Fixed header -->
<div class="navbar navbar-inverse">
  <h3 class="header-text">Goals</h3>
</div>

<!-- Container for the rest of the page -->
<div class="content-body">
  <!-- Form panel for submitting new goals -->
  <div class="panel panel-default">
    <form class="panel-body" ng-submit="addGoal()">
      <legend>Add Goal</legend>
      <!-- Goal title input -->
      <div class="row">
        <label class="col-md-2 control-label">Goal Title:</label>
        <div class="col-md-10">
          <input class="form-control" type="text" ng-model="input.title"
            placeholder="Name your Goal">
        </div>
      </div>
      <br>
      <!-- Goal description input -->
      <div class="row">
        <label class="col-md-2">Description:</label>
        <div class="col-md-10">
          <textarea class="form-control" type="text" ng-model="input.description"
            placeholder="What will you do to achieve your goal?"></textarea>
        </div>
      </div>
      <br>
      <!-- Goal due date input -->
      <div class="row">
        <label class="col-md-2 control-label">Due Date:</label>
        <div class="col-md-8">
          <input class="form-control" type="date" ng-model="input.due_date" />
        </div>
        <div class="col-md-2">
          <input class="btn btn-primary" type="submit" value="Add Goal" />
        </div>
      </div>
    </form>
  </div>

  <legend>Goals</legend>
  <!-- Panels for each of the user's existing goals -->
  <div class="goal panel" ng-class="goal.complete ? 'panel-success' : 'panel-primary' "
    ng-repeat="goal in user.goals | orderBy:'-updatedAt'">
    <!-- Panel heading with goal title and date of last update -->
    <div class="panel-heading">
      <div class="row">
        <div class="col-md-8">Title: {{goal.title}}</div>
        <div class="col-md-4">
          <span class="date">Updated <span am-time-ago="goal.updatedAt">{{goal.updatedAt}}</span></span>
        </div>
      </div>
    <!-- Goal edit window -->
      <div ng-controller="GoalEditController">
        <script type="text/ng-template" id="edit.html">
          <div class="modal-header">
            <h3 class="modal-title">Edit Goal</h3>
          </div>
          <div class="modal-body">
            <div class="row">
              <label class="col-md-2 control-label">Title: </label>
              <div class="col-md-10">
                <input class="form-control" type="text" ng-model="goal.title">
              </div>
            </div>
            <div class="row">
              <label class="col-md-2 control-label">Description:</label>
              <div class="col-md-10">
                <input class="form-control" type="text" ng-model="goal.description">
              </div>
            </div>
            <div class="row">
              <label class="col-md-2 control-label">Due Date:</label>
              <div class="col-md-8">
                <input class="form-control" type="date" ng-model="goal.due_date" />
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-primary" type="button" ng-click="ok()">OK</button>
            <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button>
          </div>
        </script>
      <!-- End window -->
        <div class="row">
          <div class="col-md-4 col-md-offset-8">
            <div class="btn-group-sm">
              <button class="btn btn-success" ng-click="goal.complete || completeGoal(goal._id)">Complete</button>
              <button class="btn btn-warning" ng-click="open(goal, profile.user_id)">Edit</button>
              <button class="btn btn-danger" ng-click="deleteGoal(goal._id)">Delete</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Panel body with goal description and due date -->
    <div class="panel-body">
      <div class="row">
        <label class="col-md-2">Description:</label>
        <div class="col-md-10">{{goal.description}}</div>
      </div>
      <div class="row">
        <label class="col-md-2">Due Date:</label>
        <div class="col-md-10">{{goal.due_date | amCalendar}}</div>
      </div>
    </div>
  </div>

</div>
